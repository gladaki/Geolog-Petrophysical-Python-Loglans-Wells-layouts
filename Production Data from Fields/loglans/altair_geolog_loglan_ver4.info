# spec : 
LANGUAGE = PYTHON
DESCRIPTION_DETAIL = "\# Altair in Geolog\n\n\n\#\# Load Python requirements\n\nfrom pandas import DataFrame\n\nimport altair as alt\nalt.renderers.enable('altair_viewer')\nimport altair_transform\nalt.data_transformers.disable_max_rows()\n\nimport pandas as pd\nimport numpy as np\n\nimport geolog\n\n\n\n\#\# Read in the the Geolog Well Data\n\#\#\#\# Load data from geolog\nwhile geolog.gettable()\:\n\n    df\=pd.DataFrame({'wells'\:wells,'date'\:date,'bopm'\:bopm,'bwpm'\:bwpm,'xx_bottom'\:xx_bottom,'yy_bottom'\:yy_bottom,'wor'\:wor,'wcut'\:wcut,'lwcut'\:lwcut,'lwor'\:lwor})\n\n    interval \= alt.selection_interval()\n    \n    base \= alt.Chart(df).properties(\n        width\=1000,\n        height\=1000, \n    ).add_selection(interval)\n    \n    \n    points \= base.mark_point(filled\=True).encode(\n        x\='xx_bottom\:Q',\n        y\='yy_bottom\:Q',\n        size\='bopm\:Q',\n        \#color\=alt.condition(interval, 'wells', alt.value('lightgray')),\n        color\=alt.condition(interval, 'wells', alt.value('lightgray')),\n        tooltip\='wells', \n    ).properties(\n        title\='Field Map, Wells Sized by BOPM',\n        selection\=interval\n    )\n    \n    \n    timeseries \= base.mark_line(clip\=False).encode(\n        x\='date\:T',\n        \#alt.X('date\:T', timeUnit\='year', axis\=alt.Axis(title\='')),\n        y\='sum(bopm)\:Q',\n        \#y\=alt.Y('sum(bopm)\:Q', scale\=alt.Scale(domain\=(0, 10000000000))),\n        \#color\=alt.Color('wells\:O')\n        color\=alt.value('green'),\n        tooltip\='date\:T' \n    ).properties(\n        title\='Production by Well in BOPM',\n        width\=450,\n        height\=300,\n        \#selection\=interval\n    ).transform_filter(\n        \#title\='Volve Field BOPD',    \n        interval\n    )\n    \n    \n    timeseries2 \= base.mark_line(clip\=False).encode(\n        x\='date\:T',\n        \#alt.X('date\:T', timeUnit\='year', axis\=alt.Axis(title\='')),\n        y\='sum(bwpm)\:Q',\n        \#y\=alt.Y('sum(bwpm)\:Q', scale\=alt.Scale(domain\=(0, 10000000000))),\n        \#color\=alt.Color('wells\:O')\n        color\=alt.value('blue'),\n        tooltip\='date\:T', \n    ).properties(\n        title\='Production by Well in BWPM',\n        width\=450,\n        height\=300,\n        \#selection\=interval\n    ).transform_filter(\n        \#title\='Volve Field BOPD',    \n        interval\n    )\n    \n    \n    histd \= alt.Chart(df).mark_line().encode(\n        x\='date\:T',\n        \#alt.X('date\:T', timeUnit\='year', axis\=alt.Axis(title\='')),\n        y\='median(lwcut)\:Q',\n        \#alt.Y('mean(wcut)', scale\=alt.Scale(type\='log', base\=10, domain\=(0.001, 1.0)), axis\=alt.Axis(orient\='left') ),\n        color\=alt.value('blue'),\n        \#color\='wells'\n        \#tooltip\='date\:T', \n    ).properties(\n        width\=1000,\n        height\=300\n    ).transform_filter(\n        interval\n    )\n\n    histcum \= alt.Chart(df).mark_line().encode(\n        x\='bopm\:Q',\n        \#alt.X('date\:T', timeUnit\='year', axis\=alt.Axis(title\='')),\n        y\='median(lwcut)\:Q',\n        \#alt.Y('mean(wcut)', scale\=alt.Scale(type\='log', base\=10, domain\=(0.001, 1.0)), axis\=alt.Axis(orient\='left') ),\n        color\=alt.value('blue'),\n        \#color\='wells'\n        \#tooltip\='date\:T', \n    ).properties(\n        width\=1000,\n        height\=300\n    ).transform_filter(\n        interval\n    )\n  \n    histcum2 \= alt.Chart(df).mark_line().encode(\n        \#x\='bopm\:Q',\n        alt.X('bopm\:Q',  axis\=alt.Axis(title\='')),\n        \#y\='median(lwcut)\:Q',\n        alt.Y('mean(wcut)', scale\=alt.Scale(type\='log', base\=10, domain\=(0.00001, 1.0)), axis\=alt.Axis(orient\='left') ),\n        color\=alt.value('blue'),\n        \#color\='wells'\n        \#tooltip\='date\:T', \n    ).properties(\n        width\=1000,\n        height\=300\n    ).transform_filter(\n        interval\n    )\n\n\n    \n    first \= points \n    second \= timeseries | timeseries2 \n    third \=  histd \n    forth \= histcum\n    \n    \#points & timeseries & timeseries2 & bhp & hist & hist2 & hist3 \n    \n    plot\=first & second & third & forth\n\n    plot.show()\n    \n    \# Store data into geolog\n    geolog.puttable()\n\n"
MARKDOWN = Yes
MODE: ARG:      VAR:      TYPE:         REPEAT: DEFAULT:  VALIDATION: LOCATION: UNIT:    VISIBLE: TAB_LABEL: COMMENT=
#==== ====      ====      =====         ======= ========  =========== ========= =====    ======== ========== ========                     
INPUT FILE_IN   file_in   FILE          ""      ""        ""          ""        ""       TRUE     ""         "Input table (pipe)."
INPUT DATE      date      NAME_DOUBLE   ""      DATE      ""          LOG       DATE     TRUE     ""         Date
INPUT WELLS     wells     NAME_ALPHA*32 ""      WELLS     ""          LOG       ALPHA*32 TRUE     ""         "Primary Well Identifier"
INPUT BOPM      bopm      NAME_REAL     ""      BOPM      ""          LOG       ""       TRUE     ""         "Barrles of Oil Per Month"
INPUT BWPM      bwpm      NAME_REAL     ""      BWPM      ""          LOG       ""       TRUE     ""         "Barrles of Water Per Month"
INPUT WOR       wor       NAME_REAL     ""      WOR       ""          LOG       M3/M3    TRUE     ""         "Water oil ratio"
INPUT WCUT      wcut      NAME_REAL     ""      WCUT      ""          LOG       ""       TRUE     ""         "Water Cut"
INPUT LWCUT     lwcut     NAME_REAL     ""      LWCUT     ""          LOG       ""       TRUE     ""         "log 10 Water Cut"
INPUT LWOR      lwor      NAME_REAL     ""      LWOR      ""          LOG       ""       TRUE     ""         "log 10 Water Oil Ratio"
INPUT XX_BOTTOM xx_bottom NAME_REAL     ""      XX_BOTTOM ""          LOG       ""       TRUE     ""         "X Location Bottom"
INPUT YY_BOTTOM yy_bottom NAME_REAL     ""      YY_BOTTOM ""          LOG       ""       TRUE     ""         "Y Location Bottom"
